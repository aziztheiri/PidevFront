<h3>{{ isEditing ? 'Modifier un Sinistre' : 'Ajouter un Sinistre' }}</h3>

<div *ngIf="isLoading">Chargement en cours...</div>
<div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

<form (ngSubmit)="saveSinistre()">

  <!-- Champs existants -->
  <div class="form-group">
    <label>Date Déclaration</label>
    <input type="date" class="form-control" required
           [(ngModel)]="sinistre.dateDeclaration" name="dateDeclaration">
  </div>
  <div class="form-group">
    <label>Description</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.description" name="description">
  </div>
  <div class="form-group">
    <label>Statut</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.statut" name="statut">
  </div>
  <div class="form-group">
    <label>Montant Estimé</label>
    <input type="number" class="form-control" required
           [(ngModel)]="sinistre.montantEstime" name="montantEstime">
  </div>
  <div class="form-group">
    <label>Lieu</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.lieu" name="lieu">
  </div>
  <div class="form-group">
    <label>Type de Sinistre</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.typeSinistre" name="typeSinistre">
  </div>
  <div class="form-group">
    <label>Responsabilité</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.responsabilite" name="responsabilite">
  </div>
  <div class="form-group">
    <label>Date Clôture</label>
    <input type="date" class="form-control"
           [(ngModel)]="sinistre.dateCloture" name="dateCloture">
  </div>
  <div class="form-group">
    <label>Téléphone</label>
    <input type="text" class="form-control"
           [(ngModel)]="sinistre.telephone" name="telephone">
  </div>

  <!-- Nouveaux champs pour le ML -->
  <div class="form-group">
    <label>Conditions Météo</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.weatherCondition" name="weatherCondition">
  </div>
  <div class="form-group">
    <label>État de la Chaussée</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.roadSurfaceCondition" name="roadSurfaceCondition">
  </div>
  <div class="form-group">
    <label>Conditions Lumineuses</label>
    <input type="text" class="form-control" required
           [(ngModel)]="sinistre.lightCondition" name="lightCondition">
  </div>
  <div class="form-group">
    <label>Zone (1 = Urbain, 2 = Rural)</label>
    <input type="number" class="form-control" required min="1" max="2"
           [(ngModel)]="sinistre.urbanOrRuralArea" name="urbanOrRuralArea">
  </div>

  <!-- accidentSeverity n'est pas saisi manuellement -->

  <button type="submit" class="btn btn-primary">
    {{ isEditing ? 'Mettre à Jour' : 'Ajouter' }}
  </button>
  <button type="button" class="btn btn-secondary" (click)="goBack()">Annuler</button>
</form>
<div class="form-group">
  <label>Sévérité Prédite</label>
  <input type="text" class="form-control" disabled
         [value]="getSeverityLabel(sinistre.accidentSeverity)">
</div>